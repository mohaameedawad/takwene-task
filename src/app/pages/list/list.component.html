<div class="orders-header">
  <button
    pButton
    type="button"
    label="Add New Order"
    routerLink="/add-product"
    class="p-button-raised"
  ></button>
</div>

<p-table
  [value]="products"
  responsiveLayout="scroll"
  [paginator]="true"
  [rows]="7"
>
  <ng-template pTemplate="header">
    <tr class="text-center">
      <th>Product Name</th>
      <th>Image</th>
      <th>Price</th>
      <th>Quantity</th>
      <th>Actions</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-product let-i="rowIndex">
    <tr [ngClass]="{ 'low-stock': product.AvailablePieces < 50 }">
      <td class="text-center">{{ product.ProductName }}</td>
      <td class="text-center">
        <img
          [src]="product.ProductImg"
          alt="{{ product.ProductName }}"
          class="product-img"
        />
      </td>
      <td class="text-center">{{ product.ProductPrice | currency }}</td>
      <td class="text-center">
        <p-inputNumber
          [(ngModel)]="product.AvailablePieces"
          [min]="0"
          [disabled]="!product.editing"
        ></p-inputNumber>
      </td>
      <td class="text-center">
        <button
          *ngIf="!product.editing"
          pButton
          icon="pi pi-pencil"
          (click)="startEditing(product)"
          class="edit-icon-btn"
          title="Edit Quantity"
        ></button>
        <button
          *ngIf="product.editing"
          pButton
          label="Update"
          (click)="updateQuantity(product)"
          class="update-btn"
        ></button>
      </td>
    </tr>
  </ng-template>
</p-table>
